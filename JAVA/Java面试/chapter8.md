# 网络
## 79.http 响应码 301 和 302 代表的是什么？有什么区别？
---
- 301 Moved Permanently
被请求的资源已永久移动到新位置，并且将来任何对此资源的引用都应该使用本响应返回的若干个 URI 之一。如果可能，拥有链接编辑功能的客户端应当自动把请求的地址修改为从服务器反馈回来的地址。除非额外指定，否则这个响应也是可缓存的。
- 302 Found
请求的资源现在临时从不同的 URI 响应请求。由于这样的重定向是临时的，客户端应当继续向原有地址发送以后的请求。只有在Cache-Control或Expires中进行了指定的情况下，这个响应才是可缓存的。
- 区别：
    301 表示被请求 url 永久转移到新的 url；302 表示被请求 url 临时转移到新的 url。
    301 搜索引擎会索引新 url 和新 url 页面的内容；302 搜索引擎可能会索引旧 url 和 新 url 的页面内容。
    302 的返回码可能被别人利用，劫持你的网址。因为搜索引擎索引他的网址，他返回 302 跳转到你的页面。

## 80.forward 和 redirect 的区别？
---
1. 定义不同
 - redirect（间接转发方式）：实际上是两次请求，服务器在响应第一次请求的时候，让浏览器再向另外一个 URL 发出请求，从而达到转发的目的
 - forward(直接转发请求)： 客户端/浏览器只发送了一次请求，有第二个信息资源响应该请求，在请求对象的 Request 中，保存的对象对于每个信息资源是共享的
2. 请求方不同
 - redirect 客户端发起的请求
 - forward 服务器发起的请求
3. 浏览器表现地址不一样
 - redirect: 浏览器地址显示被请求的 url
 - forward：浏览器地址不显示被请求的 url
4. 参数传递不同
 - redirect:重新开始一个 Request，原先的 Request 生命周期结束
 - forward: forward 另外一个连接的时候，request 变量的是在其生命周期内的，另外一个页面也可以使用，本质是吧目标地址 include
5. 底层运作不同
 - redirect: 发送的请求信息有发给客户端，让客户端在转发到另外一个资源上，需要在服务器和客户端之间在增加一次通信
 - forward: 服务器端直接找到目标，并 include 过来

## 81.简述 tcp 和 udp的区别？
---
- UDP 是面向无连接的通讯协议，UDP 数据包括目的端口号和源端信息。
    优点：UDP 速度快、操作简单、要求系统资源较少，由于通讯不需要连接，可以实现广播发送
    缺点：UDP 传送数据前并不与对方建立连接，对接收到的数据也不发送确认信号，发送端不知道数据是否会正确接收，也不重复发送，不可靠。
- TCP 是面向连接的通讯协议，通过三次握手建立连接，通讯完成时四次挥手
    优点：TCP 在数据传递时，有确认、窗口、重传、阻塞等控制机制，能保证数据正确性，较为可靠。
    缺点：TCP 相对于 UDP 速度慢一点，要求系统资源较多。
    
## 82.tcp 为什么要三次握手，两次不行吗？为什么？
---
- 两次握手只能保证单向连接是畅通的。
    Step1       A -> B : 你好，B。
    Step2       A <- B : 收到。你好，A。
这样的两次握手过程， A 向 B 打招呼得到了回应，即 A 向 B 发送数据，B 是可以收到的。
但是 B 向 A 打招呼，A 还没有回应，B 没有收到 A 的反馈，无法确保 A 可以收到 B 发送的数据。
- 只有经过第三次握手，才能确保双向都可以接收到对方的发送的 数据。
    Step3       A -> B : 收到，B。
这样 B 才能确定 A 也可以收到 B 发送给 A 的数据。

## 83.说一下 tcp 粘包是怎么产生的？
---
1. 什么是 tcp 粘包？
发送方发送的多个数据包，到接收方缓冲区首尾相连，粘成一包，被接收。
2. 原因
TCP 协议默认使用 Nagle 算法可能会把多个数据包一次发送到接收方。
应用程读取缓存中的数据包的速度小于接收数据包的速度，缓存中的多个数据包会被应用程序当成一个包一次读取。
3. 处理方法
发送方使用 TCP_NODELAY 选项来关闭 Nagle 算法
数据包增加开始符和结束，应用程序读取、区分数据包。
在数据包的头部定义整个数据包的长度，应用程序先读取数据包的长度，然后读取整个长度的包字节数据，保证读取的是单个包且完整

## 84.OSI 的七层模型都有哪些？
---

<img src="/_markdownimg/20180316155619885.png" alt="图片名称" align=center />

## 85.get 和 post 请求有哪些区别？
---
- 在浏览器进行回退操作时,get请求是无害的,而post请求则会重新请求一次
- get请求参数是连接在url后面的,而post请求参数是存放在requestbody内的
- get请求因为浏览器对url长度有限制(不同浏览器长度限制不一样)对传参数量有限制,而post请求因为参数存放在requestbody内所以参数数量没有限制(事实上get请求也能在requestbody内携带参数,只不过不符合规定,有的浏览器能够获取到数据,而有的不能)
- 因为get请求参数暴露在url上,所以安全方面post比get更加安全
- get请求浏览器会主动cache,post并不会,除非主动设置
- get请求参数会保存在浏览器历史记录内,post请求并不会
- get请求只能进行url编码,而post请求可以支持多种编码方式
- get请求产生1个tcp数据包,post请求产生2个tcp数据包
- 浏览器在发送get请求时会将header和data一起发送给服务器,服务器返回200状态码,而在发送post请求时,会先将header发送给服务器,服务器返回100,之后再将data发送给服务器,服务器返回200 OK

## 86.如何实现跨域？
---
1. jsonp
利用了 script 不受同源策略的限制
缺点：只能 get 方式，易受到 XSS攻击

2. CORS（Cross-Origin Resource Sharing）,跨域资源共享
当使用XMLHttpRequest发送请求时，如果浏览器发现违反了同源策略就会自动加上一个请求头 origin；
后端在接受到请求后确定响应后会在后端在接受到请求后确定响应后会在 Response Headers 中加入一个属性 Access-Control-Allow-Origin；
浏览器判断响应中的 Access-Control-Allow-Origin 值是否和当前的地址相同，匹配成功后才继续响应处理，否则报错
缺点：忽略 cookie，浏览器版本有一定要求

3. 代理跨域请求
前端向发送请求，经过代理，请求需要的服务器资源
缺点：需要额外的代理服务器

4. Html5 postMessage 方法
允许来自不同源的脚本采用异步方式进行有限的通信，可以实现跨文本、多窗口、跨域消息传递
缺点：浏览器版本要求，部分浏览器要配置放开跨域限制

5. 修改 document.domain 跨子域
相同主域名下的不同子域名资源，设置 document.domain 为 相同的一级域名
缺点：同一一级域名；相同协议；相同端口

6. 基于 Html5 websocket 协议
websocket 是 Html5 一种新的协议，基于该协议可以做到浏览器与服务器全双工通信，允许跨域请求
缺点：浏览器一定版本要求，服务器需要支持 websocket 协议

7. document.xxx + iframe
通过 iframe 是浏览器非同源标签，加载内容中转，传到当前页面的属性中
缺点：页面的属性值有大小限制

## 87.说一下 JSONP 实现原理？
---
- JSONP  是一种非正式传输协议，该协议的一个要点就是允许用户传递一个callback 或者开始就定义一个回调方法，参数给服务端，然后服务端返回数据时会将这个callback 参数作为函数名来包裹住 JSON  数据，这样客户端就可以随意定制自己的函数来自动处理返回数据了。

- JSONP  和 JSON  的区别： JSON  是一种传输格式，而 JSONP  呢是一种数据的获取方式。其实他们没什么相关性，有的人说带callback 的 JSON  传输就是 JSONP  ，下面我会证明这是错误的说法。 JSONP  可以跨域，记住这一点就可以了